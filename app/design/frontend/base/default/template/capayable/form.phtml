<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
$_code = $this->getMethodCode();
$_quote = $this->getQuote();
$_customer = $this->getCustomer();
$isLoggedIn = Mage::helper('customer')->isLoggedIn();
?>
<ul class="form-list" id="payment_form_<?php echo $_code ?>" style="display:none;">
    <?php if(!$isLoggedIn): ?>
        <?php if(!$_quote->getCustomerMiddlename()): ?>
            <li>
                <label for="<?php echo $_code?>_middlename" class="required"><em>*</em><?php echo $this->__('Middle name (initials)')?></label>
                <div class="input-box">
                    <input type="text" id="<?php echo $_code?>_middlename" name="payment[customer_middlename]" class="input-text required-entry" value="" />
                </div>
            </li>
        <?php endif ?>
        <?php if(!$_quote->getCustomerDob()): ?>
            <li>
                <label for="<?php echo $_code?>_month" class="required"><em>*</em><?php echo $this->__('Date of Birth') ?></label>
                <div class="input-box capayable-customer-dob customer-dob">
                    <?php
                    $_dob = $this->getLayout()->createBlock('customer/widget_dob');
                    $_dob->setDateInput('d',
                        '<div class="dob-day">
                             <input type="text" id="day" name="payment[day]" value="' . $_dob->getDay() . '" title="' . $this->__('Day') . '" class="input-text validate-custom" />
                             <label for="' . $_code . '_day">' . $this->__('DD') . '</label>
                         </div>'
                    );

                    $_dob->setDateInput('m',
                        '<div class="dob-month">
                             <input type="text" id="' . $_code . '_month" name="payment[month]" value="' . $_dob->getMonth() . '" title="' . $this->__('Month')  . '" class="input-text validate-custom" />
                             <label for="' . $_code . '_month">' . $this->__('MM')  . '</label>
                        </div>'
                    );

                    $_dob->setDateInput('y',
                        '<div class="dob-year">
                             <input type="text" id="' . $_code . '_year" name="payment[year]" value="' . $_dob->getYear() . '" title="' . $this->__('Year')  . '" class="input-text validate-custom" />
                             <label for="' . $_code . '_year">' . $this->__('YYYY')  . '</label>
                        </div>'
                    );

                    echo $_dob->getSortedDateInputs();
                    ?>
                    <div class="dob-full" style="display:none;">
                        <input type="hidden" id="<?php echo $_code ?>_dob" name="payment[customer_dob]" />
                    </div>

                    <div class="validation-advice" style="display:none;"></div>
                </div>
                <script type="text/javascript">
                    //<![CDATA[
                    var capayable_customer_dob = new Varien.DOB('.capayable-customer-dob', true, '<?php echo $_dob->getDateFormat() ?>');
                    //]]>
                </script>
            </li>
        <?php endif ?>
        <?php if(!$_quote->getCustomerGender()): ?>
            <li>
                <label for="<?php echo $_code?>_gender" class="required"><em>*</em><?php echo $this->__('Gender') ?></label>
                <div class="input-box">
                    <select id="<?php echo $_code?>_gender" name="payment[customer_gender]" title="<?php echo $this->__('Gender') ?>" class="validate-select">
                        <?php
                            $options = Mage::getResourceSingleton('customer/customer')->getAttribute('gender')->getSource()->getAllOptions();
                        ?>
                        <?php foreach ($options as $option):?>
                            <option value="<?php echo $option['value'] ?>"><?php echo $option['label'] ?></option>
                        <?php endforeach;?>
                    </select>
                </div>
            </li>
        <?php endif ?>
    <?php endif ?>
    <li>
        <label for="<?php echo $_code?>_street" class="required"><em>*</em><?php echo $this->__('Street')?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $_code?>_street" name="payment[street]" class="input-text required-entry" value="<?php if($_customer->getStreet() && $isLoggedIn) echo $_customer->getStreet()?>" />
        </div>
    </li>
    <li>
        <label for="<?php echo $_code?>_house_number" class="required"><em>*</em><?php echo $this->__('House number')?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $_code?>_house_number" name="payment[house_number]" class="input-text required-entry" value="<?php if($_customer->getHouseNumber() && $isLoggedIn) echo $_customer->getHouseNumber()?>" />
        </div>
    </li>
    <li>
        <label for="<?php echo $_code?>_house_suffix"><?php echo $this->__('House number suffix')?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $_code?>_house_suffix" name="payment[house_suffix]" class="input-text" value="<?php if($_customer->getHouseSuffix() && $isLoggedIn) echo $_customer->getHouseSuffix()?>" />
        </div>
    </li>
    <li>
        <label for="<?php echo $_code?>_is_corporation"><?php echo $this->__('Is Corporation')?></label>
        <div class="input-box">
            <select name="payment[is_corporation]" id="<?php echo $_code ?>_is_corporation">
                <option value="0" <?php if($_customer->getIsCorporation() == 0 && $isLoggedIn): ?>selected="selected"<?php endif ?>><?php echo $this->__('No')?></option>
                <option value="1" <?php if($_customer->getIsCorporation() == 1 && $isLoggedIn): ?>selected="selected"<?php endif ?>><?php echo $this->__('Yes')?></option>
            </select>
        </div>
    </li>
    <li>
        <label for="<?php echo $_code?>_corporation_name"><?php echo $this->__('Corporation Name')?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $_code?>_corporation_name" name="payment[corporation_name]" class="input-text" value="<?php if($_customer->getCorporationName() && $isLoggedIn) echo $_customer->getCorporationName()?>" />
        </div>
    </li>
    <li>
        <label for="<?php echo $_code?>_coc_number"><?php echo $this->__('Chamber of Commerce Number')?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $_code?>_coc_number" name="payment[coc_number]" class="input-text" value="<?php if($_customer->getCocNumber() && $isLoggedIn) echo $_customer->getCocNumber()?>" />
        </div>
    </li>
</ul>
